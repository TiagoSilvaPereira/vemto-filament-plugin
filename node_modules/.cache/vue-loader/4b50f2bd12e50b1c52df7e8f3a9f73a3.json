{"remainingRequest":"C:\\Users\\T-Gamer\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Code\\plugins\\vemto-fillament\\src\\Component.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Code\\plugins\\vemto-fillament\\src\\Component.vue","mtime":1641589021294},{"path":"C:\\Users\\T-Gamer\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\babel-loader\\lib\\index.js","mtime":1639486004356},{"path":"C:\\Users\\T-Gamer\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1639486002337},{"path":"C:\\Users\\T-Gamer\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\index.js","mtime":1639486004716}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgZGF0YSgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIHByb2plY3RDcnVkczogW10sDQogICAgICAgICAgICBwbHVnaW5EYXRhOiBbXSwNCiAgICAgICAgICAgIHZlbXRvUHJvamVjdDoge30NCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICBjcmVhdGVkKCkgew0KICAgICAgICB0aGlzLnZlbXRvUHJvamVjdCA9IHdpbmRvdy52ZW10b0FwaS5nZXRQcm9qZWN0KCkNCiAgICAgICAgdGhpcy5wbHVnaW5EYXRhID0gd2luZG93LnZlbXRvQXBpLmdldFBsdWdpbkRhdGEoKQ0KICAgICAgICB0aGlzLnByb2plY3RDcnVkcyA9IHRoaXMudmVtdG9Qcm9qZWN0LmdldE1haW5DcnVkcygpDQoNCiAgICAgICAgaWYodGhpcy5wbHVnaW5EYXRhLmNydWRzKSB0aGlzLmNoZWNrTmV3UHJvamVjdENydWRzKCkNCiAgICB9LA0KDQogICAgbWV0aG9kczogew0KICAgICAgICBnZXRBbGxSZWxhdGlvbnNoaXBzRnJvbU1vZGVsKG1vZGVsKSB7DQogICAgICAgICAgICBsZXQgYmFzaWNSZWxhdGlvbnNoaXBzID0gbW9kZWwuZ2V0QWxsUmVsYXRpb25zaGlwcygpLA0KICAgICAgICAgICAgICAgIG1vcnBoUmVsYXRpb25zaGlwcyA9IG1vZGVsLmdldEFsbE1vcnBoUmVsYXRpb25zaGlwcygpDQoNCiAgICAgICAgICAgIHJldHVybiBbXS5jb25jYXQoDQogICAgICAgICAgICAgICAgYmFzaWNSZWxhdGlvbnNoaXBzLCBtb3JwaFJlbGF0aW9uc2hpcHMNCiAgICAgICAgICAgICkNCiAgICAgICAgfSwNCg0KICAgICAgICB0b2dnbGVDcnVkRGF0YShjcnVkKSB7DQogICAgICAgICAgICBsZXQgY3J1ZERhdGEgPSB0aGlzLnBsdWdpbkRhdGEuY3J1ZHNbY3J1ZC5pZF0NCg0KICAgICAgICAgICAgaWYoIWNydWREYXRhIHx8ICFjcnVkRGF0YS5yZWxhdGlvbnNoaXBzKSByZXR1cm4NCg0KICAgICAgICAgICAgdGhpcy4kc2V0KGNydWREYXRhLCAnaW5wdXRzJywgY3J1ZERhdGEuc2VsZWN0ZWQpDQoNCiAgICAgICAgICAgIGNydWREYXRhLnJlbGF0aW9uc2hpcHMuZm9yRWFjaCgocmVsLCBpbmRleCkgPT4gew0KICAgICAgICAgICAgICAgIGlmKCFyZWwpIHJldHVybg0KDQogICAgICAgICAgICAgICAgaWYoIWNydWREYXRhLnJlbGF0aW9uc2hpcHNbaW5kZXhdKSByZXR1cm4NCg0KICAgICAgICAgICAgICAgIHRoaXMuJHNldChjcnVkRGF0YS5yZWxhdGlvbnNoaXBzW2luZGV4XSwgJ3NlbGVjdGVkJywgY3J1ZERhdGEuc2VsZWN0ZWQpDQogICAgICAgICAgICB9KQ0KDQogICAgICAgICAgICB0aGlzLnRvZ2dsZUNydWRNb2R1bGUoY3J1ZC5pZCwgY3J1ZERhdGEuc2VsZWN0ZWQpDQogICAgICAgICAgICB0aGlzLnNhdmUoKQ0KICAgICAgICB9LA0KDQogICAgICAgIHNlbGVjdEFsbERhdGEoZXZlbnQpIHsNCiAgICAgICAgICAgIGxldCBpc0NoZWNrZWQgPSBldmVudC50YXJnZXQuY2hlY2tlZA0KDQogICAgICAgICAgICB0aGlzLnBsdWdpbkRhdGEuY3J1ZHMuZm9yRWFjaCgoY3J1ZERhdGEsIGNydWRJZCkgPT4gew0KICAgICAgICAgICAgICAgIGlmKCFjcnVkRGF0YSkgcmV0dXJuDQoNCiAgICAgICAgICAgICAgICBjcnVkRGF0YS5zZWxlY3RlZCA9IGlzQ2hlY2tlZA0KICAgICAgICAgICAgICAgIGNydWREYXRhLmlucHV0cyA9IGlzQ2hlY2tlZA0KDQogICAgICAgICAgICAgICAgdGhpcy50b2dnbGVDcnVkTW9kdWxlKGNydWRJZCwgaXNDaGVja2VkKQ0KDQogICAgICAgICAgICAgICAgY3J1ZERhdGEucmVsYXRpb25zaGlwcy5mb3JFYWNoKChyZWwsIGluZGV4KSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmKCFyZWwpIHJldHVybg0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgY3J1ZERhdGEucmVsYXRpb25zaGlwc1tpbmRleF0uc2VsZWN0ZWQgPSBpc0NoZWNrZWQNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSkNCg0KICAgICAgICAgICAgdGhpcy5zYXZlKCkNCiAgICAgICAgfSwNCg0KICAgICAgICB0b2dnbGVDcnVkTW9kdWxlKGNydWRJZCwgc2VsZWN0ZWQpIHsNCiAgICAgICAgICAgIGlmKHNlbGVjdGVkKSB7DQogICAgICAgICAgICAgICAgdGhpcy52ZW10b1Byb2plY3QucHVyZ2VSZW1vdmVkTW9kdWxlKCdjcnVkLXNldHRpbmdzJywgY3J1ZElkKQ0KICAgICAgICAgICAgICAgIHJldHVybg0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB0aGlzLnZlbXRvUHJvamVjdC5yZWdpc3RlclJlbW92ZWRNb2R1bGUoJ2NydWQtc2V0dGluZ3MnLCBjcnVkSWQpDQogICAgICAgIH0sDQogICAgICAgIA0KICAgICAgICBjaGVja05ld1Byb2plY3RDcnVkcygpIHsNCiAgICAgICAgICAgIHRoaXMucHJvamVjdENydWRzLmZvckVhY2goY3J1ZCA9PiB7DQogICAgICAgICAgICAgICAgaWYodGhpcy5wbHVnaW5EYXRhLmNydWRzW2NydWQuaWRdKSByZXR1cm4NCg0KICAgICAgICAgICAgICAgIGxldCBjcnVkRGF0YSA9IHsgJ3NlbGVjdGVkJzogZmFsc2UsICdpbnB1dHMnOiBmYWxzZSwgJ3JlbGF0aW9uc2hpcHMnOiBbXSB9LA0KICAgICAgICAgICAgICAgICAgICBjcnVkUmVsYXRpb25zaGlwcyA9IHRoaXMuZ2V0QWxsUmVsYXRpb25zaGlwc0Zyb21Nb2RlbChjcnVkLm1vZGVsKQ0KDQogICAgICAgICAgICAgICAgaWYoY3J1ZFJlbGF0aW9uc2hpcHMubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgICAgIGNydWRSZWxhdGlvbnNoaXBzLmZvckVhY2gocmVsID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNydWREYXRhLnJlbGF0aW9uc2hpcHNbcmVsLmlkXSA9IHt9DQogICAgICAgICAgICAgICAgICAgICAgICBjcnVkRGF0YS5yZWxhdGlvbnNoaXBzW3JlbC5pZF0uc2VsZWN0ZWQgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIHRoaXMuJHNldCh0aGlzLnBsdWdpbkRhdGEuY3J1ZHMsIGNydWQuaWQsIGNydWREYXRhKQ0KICAgICAgICAgICAgfSkNCg0KICAgICAgICAgICAgdGhpcy5zYXZlKCkNCiAgICAgICAgfSwNCg0KICAgICAgICBzYXZlOiB3aW5kb3cudmVtdG9BcGkuZGVib3VuY2UoZnVuY3Rpb24oKSB7DQogICAgICAgICAgICB3aW5kb3cudmVtdG9BcGkuc2F2ZVBsdWdpbkRhdGEoew0KICAgICAgICAgICAgICAgIGNydWRzOiB0aGlzLnBsdWdpbkRhdGEuY3J1ZHMNCiAgICAgICAgICAgIH0pDQogICAgICAgIH0sIDMwMCkNCiAgICB9DQp9DQo="},{"version":3,"sources":["Component.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Component.vue","sourceRoot":"src","sourcesContent":["<template>\r\n    <div class=\"w-full\">\r\n        <label class=\"block text-sm font-bold\">Laravel Filament</label>\r\n        <small class=\"mb-2\">Select the CRUDs to generate a Laravel Filament Resource</small>\r\n        \r\n        <div class=\"mt-5\">\r\n            <label class=\"block text-sm font-bold mb-2\">Project CRUDs</label>\r\n\r\n            <div class=\"form-check mb-3\">\r\n                <label class=\"inline-flex items-center\" for=\"selectAllCruds\">\r\n                    <input class=\"form-checkbox\" type=\"checkbox\" id=\"selectAllCruds\" @change=\"selectAllData\">\r\n                    <span class=\"ml-2 text-gray-800 dark:text-gray-300\">Select All</span>\r\n                </label>\r\n            </div>\r\n            \r\n            <template v-if=\"!! pluginData.cruds\">\r\n                <div class=\"bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-900 p-2 rounded-md my-3\" v-for=\"crud in projectCruds\" :key=\"'crud' + crud.id\">\r\n                    <div class=\"form-check\">\r\n                        <label class=\"inline-flex items-center text-gray-800\" :for=\"crud.id\">\r\n                            <input class=\"form-checkbox\" type=\"checkbox\" v-model=\"pluginData.cruds[crud.id]['selected']\" :id=\"crud.id\" @change=\"toggleCrudData(crud)\">\r\n                            <span class=\"ml-2 text-gray-800 dark:text-gray-100\">{{ crud.name }}</span>\r\n                        </label>\r\n                    </div>\r\n                    <div class=\"form-check mt-1 ml-3\">\r\n                        <label class=\"inline-flex items-center\">\r\n                            <input class=\"form-checkbox\" type=\"checkbox\" v-model=\"pluginData.cruds[crud.id]['inputs']\" @change=\"save\">\r\n                            <span class=\"ml-2 text-gray-800 dark:text-gray-300\">Inputs</span>\r\n                        </label>\r\n                    </div>\r\n                    <small class=\"mb-1 ml-3\">Relationships</small>\r\n                    <div class=\"form-check my-1 ml-3\" v-for=\"relationship in getAllRelationshipsFromModel(crud.model)\" :key=\"'rel' + relationship.id\">\r\n                        <label class=\"inline-flex items-center\">\r\n                            <input class=\"form-checkbox\" type=\"checkbox\" v-model=\"pluginData.cruds[crud.id]['relationships'][relationship.id].selected\" @change=\"save\">\r\n                            <span class=\"ml-2 text-gray-800 dark:text-gray-300\">{{ `${relationship.type.case('pascalCase')} (${relationship.name.case('pascalCase')})` }}</span>\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n            </template>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {\r\n            projectCruds: [],\r\n            pluginData: [],\r\n            vemtoProject: {}\r\n        }\r\n    },\r\n\r\n    created() {\r\n        this.vemtoProject = window.vemtoApi.getProject()\r\n        this.pluginData = window.vemtoApi.getPluginData()\r\n        this.projectCruds = this.vemtoProject.getMainCruds()\r\n\r\n        if(this.pluginData.cruds) this.checkNewProjectCruds()\r\n    },\r\n\r\n    methods: {\r\n        getAllRelationshipsFromModel(model) {\r\n            let basicRelationships = model.getAllRelationships(),\r\n                morphRelationships = model.getAllMorphRelationships()\r\n\r\n            return [].concat(\r\n                basicRelationships, morphRelationships\r\n            )\r\n        },\r\n\r\n        toggleCrudData(crud) {\r\n            let crudData = this.pluginData.cruds[crud.id]\r\n\r\n            if(!crudData || !crudData.relationships) return\r\n\r\n            this.$set(crudData, 'inputs', crudData.selected)\r\n\r\n            crudData.relationships.forEach((rel, index) => {\r\n                if(!rel) return\r\n\r\n                if(!crudData.relationships[index]) return\r\n\r\n                this.$set(crudData.relationships[index], 'selected', crudData.selected)\r\n            })\r\n\r\n            this.toggleCrudModule(crud.id, crudData.selected)\r\n            this.save()\r\n        },\r\n\r\n        selectAllData(event) {\r\n            let isChecked = event.target.checked\r\n\r\n            this.pluginData.cruds.forEach((crudData, crudId) => {\r\n                if(!crudData) return\r\n\r\n                crudData.selected = isChecked\r\n                crudData.inputs = isChecked\r\n\r\n                this.toggleCrudModule(crudId, isChecked)\r\n\r\n                crudData.relationships.forEach((rel, index) => {\r\n                    if(!rel) return\r\n                    \r\n                    crudData.relationships[index].selected = isChecked\r\n                })\r\n            })\r\n\r\n            this.save()\r\n        },\r\n\r\n        toggleCrudModule(crudId, selected) {\r\n            if(selected) {\r\n                this.vemtoProject.purgeRemovedModule('crud-settings', crudId)\r\n                return\r\n            }\r\n\r\n            this.vemtoProject.registerRemovedModule('crud-settings', crudId)\r\n        },\r\n        \r\n        checkNewProjectCruds() {\r\n            this.projectCruds.forEach(crud => {\r\n                if(this.pluginData.cruds[crud.id]) return\r\n\r\n                let crudData = { 'selected': false, 'inputs': false, 'relationships': [] },\r\n                    crudRelationships = this.getAllRelationshipsFromModel(crud.model)\r\n\r\n                if(crudRelationships.length) {\r\n                    crudRelationships.forEach(rel => {\r\n                        crudData.relationships[rel.id] = {}\r\n                        crudData.relationships[rel.id].selected = false\r\n                    })\r\n                }\r\n\r\n                this.$set(this.pluginData.cruds, crud.id, crudData)\r\n            })\r\n\r\n            this.save()\r\n        },\r\n\r\n        save: window.vemtoApi.debounce(function() {\r\n            window.vemtoApi.savePluginData({\r\n                cruds: this.pluginData.cruds\r\n            })\r\n        }, 300)\r\n    }\r\n}\r\n</script>"]}]}